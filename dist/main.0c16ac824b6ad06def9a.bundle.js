webpackJsonp([1],{0:function(e,t,n){e.exports=n("x35b")},"1kG0":function(e,t){e.exports='<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">\n  <a class="navbar-brand" routerLink="/" routerLinkActive="active"\n     [routerLinkActiveOptions]="{exact:true}">\n    Glaucoma Risk Calculator\n  </a>\n\n  <div class="collapse navbar-collapse" id="navbarsExampleDefault">\n    <form class="form-inline my-2 my-lg-0" *ngIf="authService.isLoggedIn()">\n      <a class="nav-item nav-link" routerLinkActive="active" routerLink="/admin/dashboard">\n        Dashboard\n      </a>\n      <button class="a nav-item nav-link btn" (click)="logout()">\n        Logout\n      </button>\n    </form>\n    <ul class="navbar-nav mr-auto"></ul>\n    <a href="http://glaucoma.org.au"><img src="../../assets/reversed-logo.png" alt="logo"/></a>\n  </div>\n</nav>\n'},"3f7S":function(e,t){e.exports=""},"3wRP":function(e,t){e.exports='<textarea id="{{elementId}}" name="{{elementId}}"></textarea>\n'},"4+2t":function(e,t){e.exports="/*\n * Sidebar\n */\n\n/* Hide for mobile, show later */\n\n.sidebar {\n  display: none;\n}\n\n@media (min-width: 768px) {\n  .sidebar {\n    position: fixed;\n    top: 51px;\n    bottom: 0;\n    left: 0;\n    z-index: 1000;\n    display: block;\n    padding: 20px;\n    overflow-x: hidden;\n    overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */\n    background-color: #f5f5f5;\n    border-right: 1px solid #eee;\n  }\n}\n\n/* Sidebar navigation */\n\n.nav-sidebar {\n  margin-right: -21px; /* 20px padding + 1px border */\n  margin-bottom: 20px;\n  margin-left: -20px;\n}\n\n.nav-sidebar > li > a {\n  padding-right: 20px;\n  padding-left: 20px;\n}\n\n.nav-sidebar > .active > a,\n.nav-sidebar > .active > a:hover,\n.nav-sidebar > .active > a:focus {\n  color: #fff;\n  background-color: #428bca;\n}\n"},"4nrF":function(e,t){e.exports='<div [hidden]="submitted">\n  <h5>Complete the following to calculate your risk of developing glaucoma, and what to do about it.</h5>\n\n  <form [formGroup]="riskForm" *ngIf="active" (ngSubmit)="onSubmit()">\n    <span class="form-check-label label" style="padding-left: 0">Gender</span>\n    <fieldset class="form-group" id="gender" name="gender">\n      <div class="form-check">\n        <label class="form-check-label">\n          <input type="radio" class="form-check-input" name="gender" id="male" value="male"\n                 formControlName="gender">\n          Male\n        </label>\n      </div>\n      <div class="form-check">\n        <label class="form-check-label">\n          <input type="radio" class="form-check-input" name="gender" id="female" value="female"\n                 formControlName="gender">\n          Female\n        </label>\n      </div>\n      <div *ngIf="formErrors.gender" class="alert alert-danger">\n        {{ formErrors.gender }}\n      </div>\n    </fieldset>\n\n    <div class="form-group">\n      <label for="age">Age</label>\n      <input type="number" id="age" class="form-control"\n             formControlName="age" placeholder="Specify age">\n    </div>\n\n    <div class="form-group">\n      <label for="ethnicity">Ethnicity</label>\n      <ng-select [items]="ethnicities"\n                 (selected)="selected_ethnicity($event)"\n                 (data)="selected_ethnicity($event)"\n                 id="ethnicity" formControlName="ethnicity"\n                 placeholder="Search for ethnicity">\n      </ng-select>\n    </div>\n\n    <div class="container-fluid">\n      <div class="row">\n        <fieldset class="col-sm">\n          <legend>Family history of glaucoma</legend>\n\n          <div class="form-check form-check-inline container">\n            <div class="row">\n              <label class="form-check-label col col-sm">\n                Parent\n                <input class="form-control form-check-input" type="checkbox" id="parent" formControlName="parent">\n              </label>\n              <label class="form-check-label col col-sm">\n                Sibling\n                <input class="form-control form-check-input" type="checkbox" id="sibling" formControlName="sibling">\n              </label>\n            </div>\n          </div>\n        </fieldset>\n\n        <fieldset class="col-sm">\n          <legend>Other health issues</legend>\n\n          <div class="form-check form-check-inline container">\n            <div class="row">\n              <label class="form-check-label col col-sm">\n                Myopia\n                <input class="form-control form-check-input" type="checkbox" id="myopia" formControlName="myopia">\n              </label>\n              <label class="form-check-label col col-sm">\n                Diabetes\n                <input class="form-control form-check-input" type="checkbox" id="diabetes" formControlName="diabetes">\n              </label>\n            </div>\n          </div>\n        </fieldset>\n\n        <div class="col-sm" style="padding-top: 15px">\n          <button type="submit" class="btn "\n                  [class.btn-primary]="riskForm.valid"\n                  [class.btn-outline-secondary]="!riskForm.valid"\n                  [disabled]="!riskForm.valid">\n            Calculate risk\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<app-risk-quiz-form-submitted [riskQuiz]="riskQuiz" [(submitted)]="submitted" *ngIf="submitted">\n</app-risk-quiz-form-submitted>\n'},"5LyI":function(e,t){e.exports="body {\n  padding-top: 150px;\n}\n"},"5xMp":function(e,t){e.exports='<app-navbar></app-navbar>\n\n<div class="container">\n  <router-outlet></router-outlet>\n</div>\n\x3c!--\n<hr>\n\n<div class="container">\n  <div class="row offset-sm-9">\n    <button class="btn btn-lg btn-danger"\n            (click)="addAlert()">Add alert</button>\n  </div>\n</div>\n--\x3e\n<hr>\n\n<app-footer></app-footer>\n'},"7zrD":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("WT6e"),r=n("g5jc"),o=n("4zOZ"),s=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(){this._navbarPadding=16,this.navbarPaddingChange=new r.a,this.navbarPadding$=new o.a(this._navbarPadding)}return Object.defineProperty(e.prototype,"navbarPadding",{get:function(){return this._navbarPadding},set:function(e){this._navbarPadding=e,this.navbarPadding$.next(this._navbarPadding)},enumerable:!0,configurable:!0}),e=s([Object(i.Injectable)(),a("design:paramtypes",[])],e)}()},"8xD6":function(e,t){e.exports=""},DBiG:function(e,t){e.exports=""},FrLf:function(e,t){e.exports='<div class="container-fluid">\n  <div class="row">\n    <div class="col-9">\n      <app-email-tpl></app-email-tpl>\n    </div>\n    <div class="col">\n      <app-ms-auth></app-ms-auth>\n    </div>\n  </div>\n</div>\n'},"GFD+":function(e,t){e.exports=""},GZy7:function(e,t,n){"use strict";var i=n("WT6e"),r=n("Xjw4"),o=n("NOoU"),s=n("7DMc"),a=n("yLIJ"),c=n("YaPU"),l=(n("xgm2"),n("owTz"),n("wtGP")),u=n("N+Om"),p=n("o04k"),d=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t){this.authService=e,this.http=t}return e.prototype.hasTpl=function(){return!!this.email_tpl&&Object.keys(this.email_tpl).length>0&&!!this.email_tpl.tpl},e.prototype.setTpl=function(e){this.hasTpl()?this.email_tpl.tpl=e:this.email_tpl={tpl:e,createdAt:(new Date).toISOString()}},e.prototype.create=function(e){return this.setReqOptions(),this.http.post("/api/email_tpl",JSON.stringify(e),this.req_options).map(function(e){return e.json()}).catch(l.a)},e.prototype.read=function(e){return this.setReqOptions(),this.http.get("/api/email_tpl/"+e,this.req_options).map(function(e){return e.json()}).catch(l.a)},e.prototype.update=function(e,t){return this.setReqOptions(),this.http.put("/api/email_tpl/"+e.createdAt,JSON.stringify(t),this.req_options).map(function(e){return e.json()}).catch(l.a)},e.prototype.destroy=function(e){return this.setReqOptions(),this.http.delete("/api/email_tpl/"+e,this.req_options).map(function(e){return 204===e.status?Object.freeze({}):c.a.throw(new u.AssertionError({message:"Expected status of 204, got "+e.status}))}).catch(l.a)},e.prototype.setReqOptions=function(){this.req_options=new o.d({headers:new o.a({"Content-Type":"application/json",Accept:"application/json","X-Access-Token":this.authService.accessToken})})},e=d([Object(i.Injectable)(),f("design:paramtypes",[p.a,o.b])],e)}(),m=n("OZ26"),g=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e,t){this.alertsService=e,this.emailTplService=t}return e.prototype.keyupHandlerFunction=function(e){this.emailTplService.setTpl(e)},e.prototype.ngOnInit=function(){this.keyupHandlerFunction(this.emailTplService.hasTpl()?this.emailTplService.email_tpl.tpl:"")},e.prototype.tplCreate=function(e){this.emailTplService.create(e).subscribe(this.handleEmailTpl,this.handleError)},e.prototype.tplRead=function(e){var t=this;this.emailTplService.read(e).subscribe(function(e){return t.emailTplService.email_tpl=e},function(e){return t.alertsService.add({type:"warning",msg:e})})},e.prototype.tplUpdate=function(e){e.createdAt=this.emailTplService.email_tpl.createdAt,this.emailTplService.update(Object.assign({updatedAt:new Date},this.emailTplService.email_tpl),e).subscribe(this.handleEmailTpl,this.handleError)},e.prototype.tplDestroy=function(e){this.emailTplService.destroy(e).subscribe(function(e){return e},this.handleError)},e.prototype.save=function(){(this.emailTplService.hasTpl()?this.tplUpdate(Object.assign({tpl:this.emailTplService.email_tpl.tpl},this.emailTplService.email_tpl)):this.tplCreate({tpl:this.emailTplService.email_tpl.tpl,createdAt:(new Date).toISOString()}))||this.alertsService.add({type:"info",msg:"Updated email template"})},e.prototype.handleEmailTpl=function(e){this.emailTplService.email_tpl=e},e.prototype.handleError=function(e){this.alertsService.add({type:"warning",msg:e})},e=g([Object(i.Component)({selector:"app-email-tpl",template:n("N6X2"),styles:[n("3f7S")]}),b("design:paramtypes",[m.a,h])],e)}(),y=n("5eDb"),_=n.n(y),k=(n("o5MN"),n("T8kY"),n("m/OW"),n("qR11"),this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),j=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(e,t){this.zone=e,this.emailTplService=t,this.onEditorKeyup=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;this.emailTplService.hasTpl()?this.init():this.emailTplService.read("latest").subscribe(function(t){e.emailTplService.email_tpl=t,e.init()},function(t){return console.error(t)||e.init()})},e.prototype.ngOnDestroy=function(){_.a.remove(this.editor)},e.prototype.init=function(){var e=this;_.a.init({selector:"#"+this.elementId,plugins:["link","paste"],skin_url:"assets/skins/lightgray",setup:function(t){e.editor=t,t.on("init",function(t){e.emailTplService.hasTpl()&&t.target.setContent(e.emailTplService.email_tpl.tpl)}),t.on("keyup change",function(){e.zone.run(function(){var n=t.getContent();e.emailTplService.email_tpl.tpl=n,e.onEditorKeyup.emit(n)})})}})},k([Object(i.Input)(),j("design:type",String)],e.prototype,"elementId",void 0),k([Object(i.Output)(),j("design:type",i.EventEmitter)],e.prototype,"onEditorKeyup",void 0),e=k([Object(i.Component)({selector:"app-richtext",template:n("3wRP"),styles:[n("cmvB")]}),j("design:paramtypes",[i.NgZone,h])],e)}(),R=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},w=function(){function e(){}return e=R([Object(i.NgModule)({imports:[r.CommonModule],declarations:[O],exports:[O]})],e)}(),S=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},x=function(){function e(){}return e=S([Object(i.NgModule)({imports:[r.CommonModule,s.FormsModule,w],declarations:[v],exports:[v]})],e)}(),P=n("Exih"),C=n("UXsv"),z=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},T=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e,t,n){this.alertsService=e,this.msAuthService=t,this.emailTplService=n,this.isCollapsed=!0,this.mail_base={}}return Object.defineProperty(e.prototype,"client_id",{get:function(){return this.msAuthService.email_conf.client_id},set:function(e){this._client_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tenant_id",{get:function(){return this.msAuthService.email_conf.tenant_id},set:function(e){this._tenant_id=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.msAuthService.getConf().subscribe(console.info,console.error)},e.prototype.login=function(){this.msAuthService.login()},e.prototype.loggedIn=function(){return!!this.msAuthService.access_token},e.prototype.logout=function(){this.msAuthService.logout()},e.prototype.sendTestEmail=function(){var e=this;console.info("MsAuthComponent::sendTestEmail"),this.msAuthService.sendEmail({recipient:this.mail_base.recipient,subject:this.mail_base.subject,content:this.emailTplService.email_tpl.tpl}).subscribe(function(t){return console.info(t)||e.alertsService.add({type:"info",msg:"Sent email"})},console.error)},e.prototype.toggleCollapse=function(){this.isCollapsed=!this.isCollapsed},e.prototype.updateAuth=function(){var e=this;this.msAuthService.insertConf({client_id:this._client_id,tenant_id:this._tenant_id,access_token:this.msAuthService.access_token}).subscribe(function(t){return console.info(t)||e.alertsService.add({type:"info",msg:"Updated auth"})},function(e){return console.error(e)})},e=z([Object(i.Component)({selector:"app-ms-auth",template:n("Igq0"),styles:[n("8xD6")]}),T("design:paramtypes",[m.a,C.a,h])],e)}(),I=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Q=function(){function e(){}return e=I([Object(i.NgModule)({imports:[r.CommonModule,s.FormsModule,P.d.forRoot()],providers:[C.a],declarations:[A],exports:[A]})],e)}();n.d(t,"a",function(){return M});var D=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},M=function(){function e(){}return e=D([Object(i.NgModule)({imports:[r.CommonModule,o.c,s.FormsModule,x,Q],declarations:[a.a],providers:[h]})],e)}()},IH5k:function(e,t){e.exports=""},Igq0:function(e,t){e.exports='<a type="button" class="btn btn-lg btn-warning" (click)="login()" *ngIf="!loggedIn()">Authenticate with Office\n  365</a>\n\n<button class="btn btn-sm btn-outline-danger"\n        (click)="logout()" *ngIf="loggedIn()">Office 365 logout\n</button>\n\n<form *ngIf="loggedIn()" (ngSubmit)="sendTestEmail()">\n  <div class="form-group">\n    <label for="recipient">Recipient</label>\n    <input type="email" class="form-control" id="recipient" name="recipient"\n           aria-describedby="emailHelp" placeholder="Enter email" [(ngModel)]="mail_base.recipient">\n    <small id="emailHelp" class="form-text text-muted">Address to send email</small>\n  </div>\n\n  <div class="form-group">\n    <label for="subject">Subject</label>\n    <input type="text" class="form-control" id="subject" name="subject"\n           aria-describedby="subjectHelp" placeholder="Enter subject" [(ngModel)]="mail_base.subject">\n    <small id="subjectHelp" class="form-text text-muted">Subject of email</small>\n  </div>\n\n  <button class="btn btn-lg btn-primary" type="submit">Send test email</button>\n</form>\n\n\n<button type="button" class="btn btn-sm" (click)="toggleCollapse()">Advanced</button>\n<hr *ngIf="!isCollapsed">\n<div [collapse]="isCollapsed" class="card card-block card-header">\n  <div class="well well-lg">\n    More info:\n    <a href="https://graph.microsoft.io/en-us/docs/authorization/app_authorization" target="_blank">\n      Microsoft Graph app authorisation\n    </a>\n    <form (ngSubmit)="updateAuth()">\n      <div class="form-group">\n        <label for="recipient">Client ID</label>\n        <input type="text" class="form-control" id="client_id" name="client_id"\n               placeholder="Enter client_id" [(ngModel)]="client_id">\n      </div>\n\n      <div class="form-group">\n        <label for="recipient">Tenant ID</label>\n        <input type="text" class="form-control" id="tenant_id" name="tenant_id"\n               placeholder="Enter tenant_id" [(ngModel)]="tenant_id">\n      </div>\n\n      <button class="btn btn-outline-warning" type="submit">Update auth</button>\n    </form>\n  </div>\n</div>\n\n'},Jnfr:function(e,t,n){var i={"app/dashboard/dashboard.module":["i8If"],"app/home/home.module":["RobO"],"app/login-signup/login-signup.module":["owow"]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}r.keys=function(){return Object.keys(i)},r.id="Jnfr",e.exports=r},MyHe:function(e,t){e.exports="@media (min-width: 768px) {\n  .main {\n    padding-right: 40px;\n    padding-left: 40px;\n  }\n}\n"},N6X2:function(e,t){e.exports='<app-richtext [elementId]="\'tpl\'" (onEditorKeyup)="keyupHandlerFunction($event)"></app-richtext>\n<button type="submit" class="btn btn-info btn-lg" (click)="save()">Save</button>\n'},OZ26:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("WT6e"),r=n("7zrD"),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.appService=e,this.alerts=[],this._padding=4.5}return e.prototype.add=function(e){this.alerts.push(e),this.appService.navbarPadding+=this._padding},e.prototype.close=function(e){this.alerts.splice(e,1),this.appService.navbarPadding-=this._padding},e=o([Object(i.Injectable)(),s("design:paramtypes",[r.a])],e)}()},PRo4:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("WT6e"),r=n("Xjw4"),o=n("bfOx"),s=n("7DMc"),a=n("rMpt"),c=(n.n(a),n("Exih")),l=n("n+cD"),u=n("qalz"),p=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=function(){function e(){}return e=p([Object(i.NgModule)({imports:[r.CommonModule,o.c.forChild(l.a),s.FormsModule,c.e.forRoot(),c.f,a.Ng2TableModule],declarations:[u.a]})],e)}()},QjeQ:function(e,t){e.exports='<div class="row">\n  <div class="col-md-4">\n    <input *ngIf="config.filtering" placeholder="Filter all columns"\n           [ngTableFiltering]="config.filtering"\n           class="form-control"\n           (tableChanged)="onChangeTable(config)"/>\n  </div>\n</div>\n<br>\n<ng-table [config]="config"\n          (tableChanged)="onChangeTable(config)"\n          (cellClicked)="onCellClick($event)"\n          [rows]="users" [columns]="columns">\n</ng-table>\n<pagination *ngIf="config.paging"\n            class="pagination-sm"\n            [(ngModel)]="page"\n            [totalItems]="length"\n            [itemsPerPage]="itemsPerPage"\n            [maxSize]="maxSize"\n            [boundaryLinks]="true"\n            [rotate]="false"\n            (pageChanged)="onChangeTable(config, $event)"\n            (numPages)="numPages = $event">\n</pagination>\n<pre *ngIf="config.paging" class="card card-block card-header">Page: {{page}} / {{numPages}}</pre>\n\n'},RobO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("WT6e"),r=n("Xjw4"),o=n("bfOx"),s=n("7zrD"),a=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.appService=e}return e.prototype.ngOnInit=function(){var e=this;this.navbarPadding=this.appService.navbarPadding,this.subNavbarPadding=this.appService.navbarPaddingChange.subscribe(function(t){return e.navbarPadding=t})},e.prototype.ngOnDestroy=function(){this.subNavbarPadding.unsubscribe()},e.prototype.increase=function(){this.appService.navbarPadding+=50},e=a([Object(i.Component)({template:n("ljLh"),styles:[n("MyHe")]}),c("design:paramtypes",[s.a])],e)}(),u=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e){this.appService=e}return e=u([Object(i.Component)({selector:"app-sidebar",template:n("vamj"),styles:[n("4+2t")],encapsulation:i.ViewEncapsulation.None}),p("design:paramtypes",[s.a])],e)}(),f=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},h=function(){function e(){}return e=f([Object(i.NgModule)({imports:[r.CommonModule],declarations:[d],exports:[d]})],e)}(),m=n("aSmH"),g=n("7DMc"),b=n("Bj4q"),v=n("Exih"),y=n("vit7"),_=n("8VAE"),k=n("dBtz"),j=n("yXRu"),O=n("NOoU"),R=n("N+Om"),w=n("YaPU"),S=(n("xgm2"),n("owTz"),n("wtGP")),x=n("o04k"),P=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},z=function(){function e(e,t){this.authService=e,this.http=t}return e.prototype.create=function(e){return this.setReqOptions(),this.http.post("/api/risk_stats",JSON.stringify(e),this.req_options).map(function(e){return e.json()}).catch(S.a)},e.prototype.read=function(e){return this.http.get("/api/risk_stats/"+e,new O.d({headers:new O.a({Accept:"application/json"})})).map(function(e){return e.json()}).catch(S.a)},e.prototype.update=function(e,t){return this.setReqOptions(),this.http.put("/api/risk_stats/"+e.createdAt,JSON.stringify(t),this.req_options).map(function(e){return e.json()}).catch(S.a)},e.prototype.destroy=function(e){return this.setReqOptions(),this.http.delete("/api/risk_stats/"+e,this.req_options).map(function(e){return 204===e.status?Object.freeze({}):w.a.throw(new R.AssertionError({message:"Expected status of 204, got "+e.status}))}).catch(S.a)},e.prototype.setReqOptions=function(){this.req_options=new O.d({headers:new O.a({"Content-Type":"application/json",Accept:"application/json","X-Access-Token":this.authService.accessToken})})},e=P([Object(i.Injectable)(),C("design:paramtypes",[x.a,O.b])],e)}(),T=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},A=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t){this.authService=e,this.http=t}return e.prototype.create=function(e){return this.setReqOptions(),this.http.post("/api/risk_res",e,this.req_options).map(function(e){return e.json()}).catch(S.a)},e.prototype.read=function(e){return this.http.get("/api/risk_res/"+e,new O.d({headers:new O.a({Accept:"application/json"})})).map(function(e){return e.json()}).catch(S.a)},e.prototype.update=function(e,t){return this.setReqOptions(),this.http.put("/api/risk_res/"+e,JSON.stringify(t),this.req_options).map(function(e){return e.json()}).catch(S.a)},e.prototype.destroy=function(e){return this.setReqOptions(),this.http.delete("/api/risk_res/"+e,this.req_options).map(function(e){return 204===e.status?Object.freeze({}):w.a.throw(new R.AssertionError({message:"Expected status of 204, got "+e.status}))}).catch(S.a)},e.prototype.setReqOptions=function(){this.req_options=new O.d({headers:new O.a({"Content-Type":"application/json",Accept:"application/json","X-Access-Token":this.authService.accessToken})})},e=T([Object(i.Injectable)(),A("design:paramtypes",[x.a,O.b])],e)}(),Q=n("QttI"),D=n("YxrS"),M=(n("VwFy"),function(){function e(e){this.riskQuiz=e}return e.prototype.calcRisk=function(e){this.study=Object(D.ethnicity2study)(e)[this.riskQuiz.ethnicity];var t={study:this.study,age:this.riskQuiz.age,gender:this.riskQuiz.gender};this.risk=+Object(D.risk_from_study)(e,t).toPrecision(4),this.risks=Object(D.risks_from_study)(e,t),this.multiplicative_risks=Object(D.calc_default_multiplicative_risks)(e,{age:this.riskQuiz.age,diabetes:this.riskQuiz.diabetes,myopia:this.riskQuiz.myopia,family_history:this.riskQuiz.sibling||this.riskQuiz.parent})},e.prototype.toJSON=function(){return{age:this.riskQuiz.age,gender:this.riskQuiz.gender,ethnicity:this.riskQuiz.ethnicity,study:this.study,parent:this.riskQuiz.parent,sibling:this.riskQuiz.sibling,myopia:this.riskQuiz.myopia,diabetes:this.riskQuiz.diabetes,client_risk:this.client_risk}},e}()),E=n("UXsv"),N=Object.freeze({indigo:"#14143e",pink:"#fd1c49",orange:"#ff6e00",yellow:"#f0c800",mint:"#00efab",cyan:"#05d1ff",purple:"#841386",white:"#fff",darkgrey:"darkgrey",teal:"#5AA454",darkred:"#A10A28",gold:"#C7B42C",grey:"#AAAAAA"}),F=function(e){return Q.compare(e,5)<1?N.darkgrey:Q.compare(e,25)<1?N.cyan:Q.compare(e,50)<1?N.mint:Q.compare(e,75)<1?N.orange:N.pink},q=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},U=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Q.config({number:"BigNumber",precision:5});var G=function(){function e(e,t,n,r){var o=this;this.route=e,this.router=t,this.riskStatsService=n,this.riskResService=r,this.submitted=!1,this.most_at_risk="",this.isCollapsed=!0,this.id=void 0,this.progressGraph={bgRadius:60,bgColor:N.indigo,rounded:!1,reverse:!1,animationSecs:1,labels:[],segments:[]},this.submittedChange=new i.EventEmitter,this.colorScheme={domain:[N.teal,N.darkred,N.gold,N.grey]},this.pieAdvColorScheme=this.colorScheme,this.autoScale=!0,this.pieData=[],this.pieAdvDim=[700,400],this.pieAdvData=[],this.pieAdvLabel="times more at risk",this.pieAdvGradient=!0,this.pie_grid=!1,this.show_pie_adv=!1,this.added_risk=!1,this.gauge=!1,this.show_treemap=!1,this.treemap_legend=[],this.submissionHeader=[],this.labelFormat=function(e){return o.treemap_legend.findIndex(function(t){return t.color===e.data.fill})<0&&o.treemap_legend.push({color:e.data.fill,name:e.data.data.name,value:e.data.data.value}),o.treemap_legend.sort(function(e,t){return e.value<t.value}),{"Chinese [Singapore: urban]":"Chinese","White European (Canadian; Italian; Irish; Welsh; Scottish)":"White (Can.)","White (Northern European: Australian)":"White (Aus.)"}[e.data.data.name]||e.data.data.name}}return e.prototype.redo=function(){this.submittedChange.emit(!1),this.router.navigate(["/"]).catch(console.error)},e.prototype.ngOnInit=function(){this.riskQuiz instanceof M||(this.riskQuiz=new M(this.riskQuiz))},e.prototype.ngAfterContentInit=function(){var e=this;this.submitted?this.prepareView():this.route.params.switchMap(function(t){return e.id=+t.id,e.riskResService.read(e.id)}).subscribe(function(t){e.riskQuiz=new M(t),e.submitted=!0,e.prepareView()})},e.prototype.toggleCollapse=function(){this.isCollapsed=!this.isCollapsed},e.prototype.parseRef=function(e){return console.info("ref keys =",Object.keys(e)),JSON.stringify(e)},e.prototype.idWithUrl=function(){return E.a.getHostOrigin()+"/results/"+this.id},e.prototype.onPieGridSelect=function(e){console.log(e)},e.prototype.pieAdvOnSelect=function(e){console.log(e)},e.prototype.prepareView=function(){var e=this;this.submissionHeader=Object.keys(this.riskQuiz.riskQuiz).filter(function(e){return-1===["createdAt","updatedAt","id","client_risk"].indexOf(e)}),this.submissionRow=Object.keys(this.riskQuiz.riskQuiz).map(function(t){return(n={})[t]=null!=e.riskQuiz.riskQuiz[t]&&e.riskQuiz.riskQuiz[t],n;var n}).reduce(function(e,t){return Object.assign(e,t)},{}),this.riskStatsService.read("latest").subscribe(function(t){e.riskStatsService.risk_json=t.risk_json;try{e.riskQuiz.calcRisk(e.riskStatsService.risk_json)}catch(t){e.router.navigate(["/"]).catch(console.error)}e.html_of_all_refs=JSON.parse(e.riskStatsService.risk_json.html_of_all_refs),e.html_of_last_note=e.riskStatsService.risk_json.global_notes.pop(),e.notes=e.riskStatsService.risk_json.global_notes,e.riskStatsService.risk=e.riskQuiz.risk,e.riskQuiz.ref=e.riskStatsService.risk_json.studies[e.riskQuiz.study].ref;var n,i,r=Object(D.familial_risks_from_study)(e.riskStatsService.risk_json,e.riskQuiz.toJSON()),o=(n=Q.multiply(Q.divide(e.riskQuiz.risks.lastIndexOf(e.riskQuiz.risk)+1,e.riskQuiz.risks.length),100),(i=r.reduce(function(e,t){return e+t},1)+n)>100?100:i),s=function(e){switch(!0){case Q.smallerEq(e,25):return"least";case Q.smallerEq(e,50):return"average";case Q.smallerEq(e,75):return"2nd greatest";case Q.larger(e,75):default:return"greatest"}}(o);e.most_at_risk=e.riskQuiz.risks.lastIndexOf(e.riskQuiz.risk)+1+" / "+e.riskQuiz.risks.length,e.riskQuiz.relative_risks=Object(D.calc_relative_risk)(e.riskStatsService.risk_json,e.riskQuiz.riskQuiz),e.show_treemap=!0,e.gaugeView(o,s),e.pieAdvView(e.riskQuiz.multiplicative_risks),e.riskQuiz.client_risk=+o.toPrecision(4),e.recommendation="We recommend you see an eye-health professional ",o<=25?(e.recommendation+=" in the next two years.",e.recommendation_subtitle="Unless you've seen one in the last 2 years"):o<=50?(e.recommendation+=" in the next year.",e.recommendation_subtitle="Unless you've seen one in the last year"):o<=75?(e.recommendation+=" in the next 6 months.",e.recommendation_subtitle="Unless you've seen one recently."):(e.recommendation+=" ASAP.",e.recommendation_subtitle="Unless you've seen one recently."),null==e.id?e.riskResService.create(e.riskQuiz.toJSON()).subscribe(function(t){e.id=t.id,e.share_url=e.idWithUrl()},console.error):e.share_url=e.idWithUrl()},console.error)},e.prototype.gaugeView=function(e,t){this.progressGraph.labels.push(new j.a({color:N.white,text:"risk",x:0,y:20,fontSize:"1em"}),new j.a({color:F(e),text:t,x:0,y:0,fontSize:"2em"})),this.progressGraph.segments.push(new j.c({value:e,color:F(e),borderWidth:20})),this.gauge=!0},e.prototype.pieAdvView=function(e){this.pieAdvData=Object.keys(e).map(function(t){return{name:t,value:e[t]}}).filter(function(e){return e.value>1}),this.show_pie_adv=this.added_risk=this.riskQuiz.riskQuiz.sibling||this.riskQuiz.riskQuiz.parent},q([Object(i.Input)(),U("design:type",M)],e.prototype,"riskQuiz",void 0),q([Object(i.Input)(),U("design:type",Object)],e.prototype,"submitted",void 0),q([Object(i.Output)(),U("design:type",i.EventEmitter)],e.prototype,"submittedChange",void 0),e=q([Object(i.Component)({selector:"app-risk-quiz-form-submitted",template:n("zd7U"),styles:[n("e6R8")]}),U("design:paramtypes",[o.a,o.b,z,I])],e)}(),L=[{path:"results",component:G},{path:"results/:id",component:G}],H=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},W=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},V=function(){function e(){this.numToColour=F}return e.prototype.ngAfterViewInit=function(){},H([Object(i.Input)(),W("design:type",Number)],e.prototype,"risk_value",void 0),e=H([Object(i.Component)({selector:"app-risk-pointer",template:n("lEF6"),styles:[n("GFD+")]}),W("design:paramtypes",[])],e)}(),X=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},B=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},J=function(){function e(e,t){this.fb=e,this.riskStatsService=t,this.riskQuiz=new M({}),this.submitted=!1,this.isCopied=!1,this.active=!0,this.formErrors={gender:"",age:"",ethnicity:"",myopia:"",diabetes:""},this.validationMessages={gender:{required:"Gender is required."},age:{required:"Age is required."},ethnicity:{required:"Ethnicity is required."}}}return e.prototype.ngAfterViewInit=function(){var e=this;this.riskStatsService.read("latest").subscribe(function(t){e.riskStatsService.risk_json=t.risk_json,e.ethnicity2study=Object(D.ethnicity2study)(e.riskStatsService.risk_json),e.all_ethnicities=e.ethnicities=Object.keys(e.ethnicity2study).sort()},console.error)},e.prototype.ngOnInit=function(){this.buildForm()},e.prototype.onSubmit=function(){this.submitted=!0,null!=this.riskForm.value.ethnicity&&this.riskForm.value.ethnicity.length&&this.riskForm.value.ethnicity instanceof Array&&(this.riskForm.value.ethnicity=this.riskForm.value.ethnicity[0].id),this.riskQuiz=new M(this.riskForm.value)},e.prototype.addRisk=function(){var e=this;this.riskQuiz=new M({}),this.buildForm(),this.active=!1,setTimeout(function(){return e.active=!0},0)},e.prototype.buildForm=function(){var e=this;this.riskForm=this.fb.group({age:[this.riskQuiz.riskQuiz.age,[g.Validators.required]],gender:[this.riskQuiz.riskQuiz.gender,[g.Validators.required]],ethnicity:[this.riskQuiz.riskQuiz.ethnicity,g.Validators.required],sibling:[this.riskQuiz.riskQuiz.sibling],parent:[this.riskQuiz.riskQuiz.parent],myopia:[this.riskQuiz.riskQuiz.myopia],diabetes:[this.riskQuiz.riskQuiz.diabetes]}),this.riskForm.valueChanges.subscribe(function(t){return e.onValueChanged(t)}),this.onValueChanged()},e.prototype.onValueChanged=function(e){if(this.riskForm){var t=this.riskForm;for(var n in this.formErrors)if(this.formErrors.hasOwnProperty(n)){this.formErrors[n]="";var i=t.get(n);if(i&&i.dirty&&!i.valid){var r=this.validationMessages[n];for(var o in i.errors)i.errors.hasOwnProperty(o)&&(this.formErrors[n]+=r[o]+" ");!0}}}},e.prototype.selected_ethnicity=function(e){null!=e&&e.length&&(this.riskQuiz.riskQuiz.ethnicity=this.riskForm.value.ethnicity=e[0].id)},e=X([Object(i.Component)({selector:"app-risk-quiz-form",template:n("4nrF"),styles:[n("SiWZ")]}),B("design:paramtypes",[g.FormBuilder,z])],e)}(),Z=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},$=function(){function e(){}return e=Z([Object(i.NgModule)({imports:[r.CommonModule,g.ReactiveFormsModule,b.a,g.FormsModule,o.c,o.c.forChild(L),v.g.forRoot(),j.b,v.d.forRoot(),y.a,_.SelectModule,k.NgxChartsModule,v.e.forRoot()],providers:[z,I],declarations:[J,G,V],exports:[J]})],e)}(),Y=[{path:"",component:l}];n.d(t,"HomeModule",function(){return ee});var K=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},ee=function(){function e(){}return e=K([Object(i.NgModule)({imports:[r.CommonModule,o.c.forChild(Y),h,m.a,$],declarations:[l],exports:[l]})],e)}()},Rpt0:function(e,t){e.exports='<div class="jumbotron">\n  <div class="container">\n    <h1 class="display-4">Administrator interface</h1>\n    <p>Herein you can edit email templates, and modify email API details.</p>\n  </div>\n</div>\n\n<div class="container">\n  <div class="row">\n    <div class="col-md-6">\n      <a class="btn btn-block btn-outline-primary" routerLink="/admin/email" routerLinkActive="active">\n        <i class="icon-mail"></i> Manage email\n      </a>\n      <p>Edit email template, modify authentication details</p>\n    </div>\n    <div class="col-md-6">\n      <button class="btn btn-block btn-outline-danger" routerLink="/admin/users" routerLinkActive="active">\n        <i class="icon-users"></i>Users\n      </button>\n      <p>View/search users</p>\n    </div>\n  </div>\n</div>\n'},Rvy0:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("WT6e"),r=n("bfOx"),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.router=e}return e=o([Object(i.Component)({selector:"app-dashboard",template:n("Rpt0"),styles:[n("DBiG")]}),s("design:paramtypes",[r.b])],e)}()},SiWZ:function(e,t){e.exports="label, .label {\n  font-weight: bold;\n}\n\nlegend {\n  font-size: medium;\n  font-weight: bold;\n}\n\n.form-check-label {\n  font-weight: unset;\n}\n"},T7K8:function(e,t){e.exports="/*\n * Top navigation\n * Hide default border to remove 1px line.\n */\n.navbar-fixed-top {\n  border: 0;\n}\n"},UXsv:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p});var i=n("WT6e"),r=n("NOoU"),o=n("YaPU"),s=(n("xgm2"),n("o04k")),a=n("wtGP"),c=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e){for(var t,n={},i=e.substring(1),r=/([^&=]+)=([^&]*)/g;t=r.exec(i);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n},p=function(){function e(e,t){this.http=e,this.authService=t,this.email_conf={},this.params=u(location.hash)}return t=e,e.genNonce=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz",t=new Uint8Array(32),n=[];return window.crypto.getRandomValues(t),t.forEach(function(t){return n.push(e[t%e.length])}),n.join("")},e.getHostOrigin=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},Object.defineProperty(e.prototype,"tenant_id",{get:function(){if(!this._tenant_id)throw TypeError("tenant_id must be defined. Did you run MsAuthService.setup?");return this._tenant_id},set:function(e){this._tenant_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_id",{get:function(){if(!this._client_id)throw TypeError("client_id must be defined. Did you run MsAuthService.setup?");return this._client_id},set:function(e){this._client_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"access_token",{get:function(){return this._access_token||(this._access_token=localStorage.getItem("ms-access-token")),this._access_token},set:function(e){this._access_token=e,localStorage.setItem("ms-access-token",e)},enumerable:!0,configurable:!0}),e.prototype.setup=function(e,t){this.tenant_id=e,this.client_id=t},e.prototype.login=function(){console.info("this.params['id_token'] =",this.params.id_token),console.info("this.params['access_token'] =",this.params.access_token),null!==this.params.id_token?this.getAccessToken():null!==this.params.access_token&&(this.access_token=this.params.access_token)},e.prototype.logout=function(){localStorage.removeItem("ms-access-token"),this._access_token=null},e.prototype.getAccessToken=function(e){var t=new r.f;t.set("response_type","token"),t.appendAll(this.genParams(e)),t.set("resource","https://graph.microsoft.com"),t.set("prompt","none"),window.location.href="https://login.microsoftonline.com/"+this.tenant_id+"/oauth2/authorize?"+t},e.prototype.sendEmail=function(e){var t=this,n=new r.d({headers:new r.a({Authorization:"Bearer "+this.access_token,"Content-Type":"application/json"})}),i={message:{subject:e.subject,toRecipients:[{emailAddress:{address:e.recipient}}],body:{content:e.content,contentType:"html"}}};return this.http.post("https://graph.microsoft.com/v1.0/users/me/sendMail",i,n).map(function(e){return 202!==e.status&&o.a.throw(new Error("Expected response.status of 202 got "+e.status+".\n           Body: "+e.text())),e}).catch(function(e){var n=JSON.parse(e._body).error;return"Access token has expired."===n.message&&t.getAccessToken(),o.a.throw(n)})},e.prototype.getConf=function(){var e=this,t=new r.d({headers:new r.a({"X-Access-Token":this.authService.accessToken,"Content-Type":"application/json"})});return this.http.get("/api/email_conf",t).map(function(t){return 200!==t.status?o.a.throw(new Error("Expected response.status of 200 got "+t.status+".\n           Body: "+t.text())):(e.email_conf=t.json(),e.email_conf)}).map(function(t){return e.setup(t.tenant_id,t.client_id)}).catch(a.a)},e.prototype.insertConf=function(e){var t=this,n=new r.d({headers:new r.a({"X-Access-Token":this.authService.accessToken,"Content-Type":"application/json"})});return this.http.post("/api/email_conf",e,n).map(function(e){return 200===e.status||201===e.status?e.json():o.a.throw(new Error("Expected response.status of 201 got "+e.status+".\n           Body: "+e.text()))}).catch(function(e){return e.message&&"Access token has expired."===e.error_message&&t.authService.redirOnResIfUnauth(e),o.a.throw(e)})},e.prototype.genParams=function(e){var n=new r.f;return n.set("client_id",this.client_id),console.info("genParams::client_id =",this.client_id),n.set("redirect_uri",t.getHostOrigin()),n.set("state",e||window.location.pathname),n.set("nonce",t.genNonce()),n},e=t=c([Object(i.Injectable)(),l("design:paramtypes",[r.b,s.a])],e);var t}()},UfTw:function(e,t){e.exports=""},aSmH:function(e,t,n){"use strict";var i=n("WT6e"),r=n("Xjw4"),o=n("Exih"),s=n("OZ26"),a=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.alertsService=e,this.type="warning"}return e.prototype.ngOnInit=function(){this.alerts=this.alertsService.alerts},e.prototype.addAlert=function(e){this.alertsService.add(e)},e.prototype.closeAlert=function(e){this.alertsService.close(e)},a([Object(i.Input)(),c("design:type",Object)],e.prototype,"type",void 0),a([Object(i.Input)(),c("design:type",Boolean)],e.prototype,"dismissible",void 0),a([Object(i.Input)(),c("design:type",Number)],e.prototype,"dismissOnTimeout",void 0),e=a([Object(i.Component)({selector:"app-alerts",template:n("y69F"),providers:[o.a],styles:[n("5LyI")]}),c("design:paramtypes",[s.a])],e)}();n.d(t,"a",function(){return p});var u=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},p=function(){function e(){}return e=u([Object(i.NgModule)({imports:[r.CommonModule,o.b.forRoot()],declarations:[l],exports:[l]})],e)}()},cXpn:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("WT6e"),r=n("bfOx"),o=n("o04k"),s=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.auth=e,this.router=t}return e.prototype.canActivate=function(){return!!this.auth.isLoggedIn()||(this.router.navigate(["login-signup"]),!1)},e=s([Object(i.Injectable)(),a("design:paramtypes",[o.a,r.b])],e)}()},cmvB:function(e,t){e.exports=""},"d/do":function(e,t){e.exports='.form-signin-up {\n  max-width: 330px;\n  padding: 15px;\n  margin: 0 auto;\n}\n\n.form-signin-up .form-signin-up-heading,\n.form-signin-up .checkbox {\n  margin-bottom: 10px;\n}\n\n.form-signin-up .checkbox {\n  font-weight: normal;\n}\n\n.form-signin-up .form-control {\n  position: relative;\n  height: auto;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  padding: 10px;\n  font-size: 16px;\n}\n\n.form-signin-up .form-control:focus {\n  z-index: 2;\n}\n\n.form-signin-up input[type="email"] {\n  margin-bottom: -1px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.form-signin-up input[type="password"] {\n  margin-bottom: 10px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n'},e6R8:function(e,t){e.exports="ng-gauge {\n  margin: 16px;\n  width: 300px;\n  height: 300px;\n  display: inline-block;\n}\n"},f6ft:function(e,t){e.exports='<footer class="footer">\n  <div class="container">\n    <app-api-version class="text-muted"></app-api-version>\n    &copy; Glaucoma Australia, 2018.\n  </div>\n</footer>\n'},gbEs:function(e,t){e.exports='<form class="form-signin-up" #formRef="ngForm" (ngSubmit)="onSubmit(formRef.value)">\n  <label for="inputEmail" class="sr-only">Email address</label>\n  <input type="email" name="email" id="inputEmail" placeholder="Email address"\n         class="form-control" required autofocus ngModel>\n  <label for="inputPassword" class="sr-only">Password</label>\n  <input type="password" name="password" id="inputPassword" placeholder="Password"\n         class="form-control" required ngModel>\n  <div class="checkbox">\n    <input id="remember" type="checkbox" value="remember-me">\n    <label for="remember">Remember me</label>\n  </div>\n\n  <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in/up</button>\n  <pre>{{formRef.value | json}}\n{{formRef.valid | json}}\n</pre>\n</form>\n'},i8If:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DashboardModule",function(){return p});var i=n("WT6e"),r=n("Xjw4"),o=n("bfOx"),s=n("Rvy0"),a=n("n+cD"),c=n("PRo4"),l=n("GZy7"),u=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},p=function(){function e(){}return e=u([Object(i.NgModule)({imports:[r.CommonModule,c.a,l.a,o.c,o.c.forChild(a.a)],declarations:[s.a]})],e)}()},lEF6:function(e,t){e.exports='<table class="table">\n  <tbody>\n  <tr>\n    <td [style.background]="numToColour(0)"></td>\n    <td [style.background]="numToColour(25)"></td>\n    <td [style.background]="numToColour(50)"></td>\n    <td [style.background]="numToColour(75)"></td>\n    <td [style.background]="numToColour(100)"></td>\n  </tr>\n  <tr>\n    <td id="0">{{risk_value}}</td>\n    <td id="1"></td>\n    <td id="2"></td>\n    <td id="3"></td>\n    <td id="4"></td>\n    <td id="5"></td>\n  </tr>\n  </tbody>\n</table>\n'},ljLh:function(e,t){e.exports='<div class="container-fluid" [style.margin-top.%]="appService.navbarPadding$ | async">\n  <app-risk-quiz-form></app-risk-quiz-form>\n</div>\n'},mIxc:function(e,t){e.exports=""},mR2D:function(e,t){e.exports=""},"n+cD":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("Rvy0"),r=n("cXpn"),o=n("yLIJ"),s=n("qalz"),a=[{path:"admin/dashboard",component:i.a,canActivate:[r.a]},{path:"admin/users",component:s.a,canActivate:[r.a]},{path:"admin/email",component:o.a,canActivate:[r.a]}]},o04k:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("WT6e"),r=n("NOoU"),o=n("bfOx"),s=n("YaPU"),a=n("EN1B"),c=(n.n(a),n("xgm2"),n("owTz"),n("OZ26")),l=n("wtGP"),u=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n){this.http=e,this.router=t,this.alertsService=n,this.headers=new r.a({"Content-Type":"application/json"})}return Object.defineProperty(e.prototype,"accessToken",{get:function(){return this._accessToken=this._accessToken?this._accessToken:localStorage.getItem("access-token"),this._accessToken},set:function(e){this._accessToken=e||this._accessToken,localStorage.setItem("access-token",this.accessToken)},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return!!this.accessToken},e.prototype.redirUnauth=function(e){var t=this;this.isLoggedIn()||(this.redirect_uri=e,this.router.navigate(["login-signup"]).then(function(e){return e?console.info("state changed"):t.alertsService.alerts.push({msg:"state didn't change",type:"warning"})},function(e){return t.alertsService.alerts.push({msg:e,type:"danger"})}))},e.prototype.create_user=function(e){var t=this,n=new r.d({headers:this.headers});return this.http.post("/api/user",JSON.stringify(e),n).map(function(e){return t.accessToken=e.headers.get("x-access-token"),e.json()}).catch(l.a)},e.prototype.post=function(e){var t=this,n=new r.d({headers:this.headers});return this.http.post("/api/auth",JSON.stringify(e),n).map(function(e){return t.accessToken=e.headers.get("x-access-token"),e.json()}).catch(l.a)},e.prototype.getAll=function(){var e=new r.d({headers:new r.a({"X-Access-Token":this.accessToken})});return this.http.get("/api/users",e).map(function(e){return e.json()}).catch(l.a)},e.prototype.del=function(e){var t=this;this.redirect_uri=e;var n=function(){t.accessToken=null,delete t._accessToken,localStorage.removeItem("access-token")};if(this.headers.set("x-access-token",this.accessToken),!this.headers.get("x-access-token"))return s.a.throw("No access token");var i=new r.d({headers:this.headers});return this.http.delete("/api/auth",i).map(function(e){return 204===e.status?n():s.a.throw(new Error("Expected response.status of 204 got "+e.status+".\n           Body: "+e.text())),e}).catch(function(e){return n(),console.error(e.json()),Object(l.a)(e)})},e.prototype.redirOnResIfUnauth=function(e){var t=this;return e.error_message&&"Nothing associated with that access token"===e.error_message&&this.del(window.location.hash).subscribe(function(e){return t.router.navigateByUrl("/login-signup")},console.error)},e=u([Object(i.Injectable)(),p("design:paramtypes",[r.b,o.b,c.a])],e)}()},okgc:function(e,t){e.exports="a {\n  text-decoration: none;\n}\n\na.active {\n  font-weight: bold;\n}\n"},owow:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("WT6e"),r=n("Xjw4"),o=n("bfOx"),s=n("7DMc"),a=n("Exih"),c=(n("a7sO"),n("o53x"),n("o04k")),l=n("OZ26"),u=n("wtGP"),p=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n){this.router=e,this.authService=t,this.alertsService=n}return e.prototype.ngOnInit=function(){this.authService.isLoggedIn()&&this.gotoDash()},e.prototype.onSubmit=function(e){var t=this,n=function(e){t.authService.isLoggedIn()?(console.info("Logged in with "+t.authService.accessToken),t.gotoDash()):t.alertsService.alerts.push({msg:JSON.stringify(e),type:"warning"})};this.authService.post(e).subscribe(n,function(i){return console.error("error =",i)||404===i.status&&"User not found"===i._parsed.error_message?t.authService.create_user(e).subscribe(n,u.b.bind(t)):u.b.bind(t)})},e.prototype.gotoDash=function(){var e=this;this.router.navigate(["/admin/dashboard"]).then(function(t){return t?console.info("state changed"):e.alertsService.alerts.push({msg:"state didn't change",type:"warning"})},function(t){return e.alertsService.alerts.push({msg:t,type:"danger"})})},p([Object(i.ViewChild)("formRef"),d("design:type",Object)],e.prototype,"form",void 0),e=p([Object(i.Component)({selector:"app-login-signup",template:n("gbEs"),styles:[n("d/do")]}),d("design:paramtypes",[o.b,c.a,l.a])],e)}(),h=[{path:"login-signup",component:f}];n.d(t,"LoginSignupModule",function(){return g});var m=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},g=function(){function e(){}return e=m([Object(i.NgModule)({imports:[r.CommonModule,s.FormsModule,o.c.forChild(h),a.c],providers:[c.a],declarations:[f],exports:[f]})],e)}()},qalz:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("WT6e"),r=n("o04k"),o=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.authService=e,this.users=[],this.columns=[{title:"email",name:"email",filtering:{filterString:"",placeholder:"Filter by email"}},{title:"updatedAt",className:["office-header","text-success"],name:"updatedAt",sort:"asc"},{title:"createdAt.",name:"createdAt"}],this.config={paging:!0,sorting:{columns:this.columns},filtering:{filterString:""},className:["table-striped","table-bordered"]},this.page=1,this.itemsPerPage=10,this.maxSize=5,this.numPages=1,this.length=0}return e.prototype.ngOnInit=function(){var e=this;this.authService.getAll().map(function(e){return e.users}).subscribe(function(t){return e.users=t},console.error),this.onChangeTable(this.config)},e.prototype.changePage=function(e,t){void 0===t&&(t=this.users);var n=(e.page-1)*e.itemsPerPage,i=e.itemsPerPage>-1?n+e.itemsPerPage:t.length;return t.slice(n,i)},e.prototype.changeSort=function(e,t){if(!t.sorting)return e;for(var n=this.config.sorting.columns||[],i=void 0,r=void 0,o=0;o<n.length;o++)""!==n[o].sort&&!1!==n[o].sort&&(i=n[o].name,r=n[o].sort);return i?e.sort(function(e,t){return e[i]>t[i]?"desc"===r?-1:1:e[i]<t[i]?"asc"===r?-1:1:0}):e},e.prototype.changeFilter=function(e,t){var n=this,i=e;if(this.columns.forEach(function(e){e.filtering&&(i=i.filter(function(t){return t[e.name].match(e.filtering.filterString)}))}),!t.filtering)return i;if(t.filtering.columnName)return i.filter(function(e){return e[t.filtering.columnName].match(n.config.filtering.filterString)});var r=[];return i.forEach(function(e){var t=!1;n.columns.forEach(function(i){e[i.name].toString().match(n.config.filtering.filterString)&&(t=!0)}),t&&r.push(e)}),i=r},e.prototype.onChangeTable=function(e,t){void 0===t&&(t={page:this.page,itemsPerPage:this.itemsPerPage}),e.filtering&&Object.assign(this.config.filtering,e.filtering),e.sorting&&Object.assign(this.config.sorting,e.sorting);var n=this.changeFilter(this.users,this.config),i=this.changeSort(n,this.config);this.users=t&&e.paging?this.changePage(t,i):i,this.length=i.length},e.prototype.onCellClick=function(e){console.log(e)},e=o([Object(i.Component)({selector:"app-users",template:n("QjeQ"),styles:[n("mR2D")]}),s("design:paramtypes",[r.a])],e)}()},vamj:function(e,t){e.exports='<div class="col-sm-3 col-md-2 sidebar" [style.top.px]="appService.navbarPadding$ | async">\n  <ul class="nav nav-sidebar">\n    <li class="active">\n      <a href="#">Overview <span class="sr-only">(current)</span></a>\n    </li>\n    <li><a href="#">Reports</a></li>\n    <li><a href="#">Stock Analytics</a></li>\n  </ul>\n  <ul class="nav nav-sidebar">\n    <li><a href="">Porfolio</a></li>\n  </ul>\n  <ul class="nav nav-sidebar">\n    <li><a href="">News</a></li>\n  </ul>\n</div>\n'},vqKx:function(e,t){e.exports='<div class="row offset-sm-9">\n  <p *ngIf="serverStatus.version">\n    {{serverStatus.version}}\n  </p>\n</div>\n'},wtGP:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a});var i=n("NOoU"),r=n("YaPU"),o=(n("MDfR"),this),s=function(e){if(!(e instanceof i.e))throw TypeError("error "+e+" can't be handled as it's not Response type, it is: "+typeof e);var t=e.json()||e.text();return r.a.throw({body:t.error&&t.error_message?e.status+" - "+t.error+": "+t.error_message:e.status+" - "+e,status:e.status,_resp:e,_parsed:t})},a=function(e){o.alertsService.alerts.push({type:"danger",msg:e.message?e.message.startsWith("JSON.parse")?"API offline":e.message:e.body})}},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("WT6e"),r=n("4PVY"),o=n("OE0E"),s=n("NOoU"),a=n("7DMc"),c=n("bfOx"),l=n("aSmH"),u=n("o04k"),p=n("cXpn"),d=n("OZ26"),f=n("Xjw4"),h=n("7zrD"),m=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t,n,i){this.router=e,this.appService=t,this.authService=n,this.alertsService=i}return e.prototype.logout=function(){var e=this;this.authService.del().subscribe(function(t){return!e.router.isActive("",!0)&&e.router.navigate(["login-signup"]).then(function(t){return t?console.info("state changed"):e.alertsService.alerts.push({msg:"state didn't change",type:"warning"})},function(t){return e.alertsService.alerts.push({msg:t,type:"danger"})})},console.error)},e=m([Object(i.Component)({selector:"app-navbar",template:n("1kG0"),styles:[n("T7K8")]}),g("design:paramtypes",[c.b,h.a,u.a,d.a])],e)}(),v=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},y=function(){function e(){}return e=v([Object(i.NgModule)({imports:[f.CommonModule,c.c,l.a],declarations:[b],exports:[b]})],e)}(),_=n("RobO"),k=n("i8If"),j=n("PRo4"),O=n("GZy7"),R=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=function(){function e(){}return e=R([Object(i.Component)({selector:"app-footer",template:n("f6ft"),styles:[n("mIxc")]}),w("design:paramtypes",[])],e)}(),x=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=function(){function e(e){this.http=e}return e.prototype.get=function(){return this.http.get("/api").map(function(e){return e.json()})},e=x([Object(i.Injectable)(),P("design:paramtypes",[s.b])],e)}(),z=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},T=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=function(){function e(e){this.serverStatusService=e,this.serverStatus={}}return e.prototype.ngOnInit=function(){var e=this;this.serverStatus={version:"App 0.0.30; "},this.serverStatusService.get().subscribe(function(t){return e.serverStatus.version+="API "+t.version},function(t){return e.serverStatus.version+="API server not available"})},z([Object(i.Input)(),T("design:type",Object)],e.prototype,"serverStatus",void 0),e=z([Object(i.Component)({selector:"app-api-version",template:n("vqKx"),styles:[n("IH5k")]}),T("design:paramtypes",[C])],e)}(),I=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Q=function(){function e(){}return e=I([Object(i.NgModule)({imports:[f.CommonModule],providers:[C],declarations:[A],exports:[A]})],e)}(),D=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},M=function(){function e(){}return e=D([Object(i.NgModule)({imports:[f.CommonModule,Q],providers:[C],declarations:[S],exports:[S]})],e)}(),E=[{path:"",loadChildren:"app/home/home.module#HomeModule"},{path:"login-signup",loadChildren:"app/login-signup/login-signup.module#LoginSignupModule"},{path:"admin",loadChildren:"app/dashboard/dashboard.module#DashboardModule"}],N=n("UXsv"),F=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},q=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},U=function(){function e(e,t,n,i){this.authService=e,this.appService=t,this.msAuthService=n,this.router=i}return e.prototype.ngOnInit=function(){var e=this,t=Object(N.b)(location.hash);Object.keys(t).length>0&&this.msAuthService.getConf().subscribe(function(n){console.info(n),t.id_token&&e.msAuthService.getAccessToken(t.state),e.msAuthService.access_token=t.access_token,t.state&&e.router.navigateByUrl(decodeURIComponent(t.state))},console.error)},e=F([Object(i.Component)({selector:"glaucoma-risk-calculator",styles:[n("okgc")],template:n("5xMp")}),q("design:paramtypes",[u.a,h.a,N.a,c.b])],e)}(),G=n("owow"),L=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},H=function(){function e(){}return e=L([Object(i.NgModule)({imports:[c.c,c.c.forRoot(E),o.BrowserModule,s.c,a.FormsModule,y,M,_.HomeModule,j.a,k.DashboardModule,O.a,l.a,G.LoginSignupModule],declarations:[U],providers:[u.a,p.a,d.a,h.a],bootstrap:[U]})],e)}();Object(i.enableProdMode)(),Object(r.a)().bootstrapModule(H)},y69F:function(e,t){e.exports='<alert *ngFor="let alert of alerts;let i = index" [type]="alert.type" dismissible="true" (close)="closeAlert(i)"\n       style="color: #ffcc9a">\n  <h3>{{ alert?.msg }}</h3>\n</alert>\n'},yLIJ:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("WT6e"),r=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e=r([Object(i.Component)({selector:"app-email",template:n("FrLf"),styles:[n("UfTw")]}),o("design:paramtypes",[])],e)}()},zd7U:function(e,t){e.exports='<div *ngIf="submitted">\n  <div class="col" *ngIf="gauge">\n    <ng-gauge [bgRadius]=progressGraph.bgRadius\n              [bgColor]=progressGraph.bgColor\n              [rounded]=progressGraph.rounded\n              [reverse]=progressGraph.reverse\n              [animationSecs]=progressGraph.animationSecs\n              [labels]=progressGraph.labels\n              [segments]=progressGraph.segments>\n    </ng-gauge>\n  </div>\n  <h3 style="text-underline: single">\n    {{recommendation}}\n  </h3>\n  <h5 style="text-underline: single; font-style: italic;">\n    ({{recommendation_subtitle | lowercase}})\n  </h5>\n\n  <div class="card">\n    <div class="card-block">\n      <h2>Glaucoma prevalence in your population is: {{riskQuiz.risk}}%.</h2>\n\n      <h3>This puts you in the\n        <strong>{{most_at_risk}}</strong> most at risk subgroup.\n        <span *ngIf="added_risk">\n          Adding in <strong>family risk</strong>, and you have:\n          {{riskQuiz.client_risk}}% relative risk within your cohort.\n        </span>\n      </h3>\n    </div>\n  </div>\n\n  <h6>Based off submission:</h6>\n\n  <table class="table table-responsive table-striped">\n    <thead>\n    <tr>\n      <th *ngFor="let col of submissionHeader">\n        {{ col }}\n      </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr>\n      <td *ngFor="let col of submissionHeader">\n        {{ submissionRow[col] }}\n      </td>\n    </tr>\n    </tbody>\n  </table>\n\n  <br>\n  <button class="btn btn-default" (click)="redo()">Redo</button>\n  <br>\n  <hr>\n  <h5>Share with family and friends to calculate their own risk</h5>\n  <div class="btn-toolbar" role="toolbar" aria-label="Share">\n    <div class="btn-group mr-2" role="group" aria-label="email">\n      <button class="btn btn-lg btn-warning">Share as email</button>\n    </div>\n    <div class="btn-group mr-2" role="group" aria-label="facebook">\n      <a class="btn btn-lg btn-primary" [href]="\'https://www.facebook.com/sharer/sharer.php?u=\'+share_url"\n         target="_blank">\n        Share on facebook\n      </a>\n    </div>\n    <div class="btn-group mr-2" role="group" aria-label="twitter">\n      <a target="_blank" class="btn btn-lg btn-info"\n         [href]="\'https://twitter.com/intent/tweet?text=\'+\'Be glaucoma aware, assess your own risk. Here\u2019s what I got: \'+share_url"\n         data-size="large">\n        Tweet\n      </a>\n    </div>\n    <div class="btn-group" role="group" aria-label="copy-link">\n      <button class="btn btn-lg btn-outline" [class.btn-success]="isCopied" ngxClipboard\n              [cbContent]="share_url" (cbOnSuccess)="isCopied = true">\n        Copy link\n      </button>\n    </div>\n  </div>\n  <hr>\n  <button class="btn btn-secondary" (click)="toggleCollapse()" [class.btn-outline-secondary]="!isCollapsed">\n    Review references and submission\n  </button>\n  <div [collapse]="isCollapsed" class="card card-block card-header" *ngIf="!isCollapsed">\n    <div class="well well-lg">\n      <h6>Your submission</h6>\n\n      <div class="row">\n        <div class="col-xs-3"><em>Age</em></div>\n        <div class="col-xs-9  pull-left"><strong>&nbsp;{{ riskQuiz.riskQuiz.age }}</strong></div>\n      </div>\n      <div class="row">\n        <div class="col-xs-3"><em>Gender</em></div>\n        <div class="col-xs-9 pull-left"><strong>&nbsp;{{ riskQuiz.riskQuiz.gender }}</strong></div>\n      </div>\n      <div class="row">\n        <div class="col-xs-3"><em>Ethnicity</em></div>\n        <div class="col-xs-9 pull-left"><strong>&nbsp;{{ riskQuiz.riskQuiz.ethnicity }}</strong></div>\n      </div>\n      <div class="row">\n        <div class="col-xs-3"><em>Sibling with glaucoma</em></div>\n        <div class="col-xs-9 pull-left"><strong>&nbsp;{{ riskQuiz.riskQuiz.sibling || \'false\' }}</strong></div>\n      </div>\n      <div class="row" style="margin-bottom: 5px">\n        <div class="col-xs-3"><em>Parent with glaucoma</em></div>\n        <div class="col-xs-9 pull-left"><strong>&nbsp;{{ riskQuiz.riskQuiz.parent || \'false\' }}</strong></div>\n      </div>\n\n      \x3c!--<app-risk-pointer [risk_value]="riskQuiz.client_risk"></app-risk-pointer>--\x3e\n\n      <ngx-charts-pie-grid *ngIf="pie_grid"\n                           [view]="pieView"\n                           [scheme]="colorScheme"\n                           [results]="pieData"\n                           autoScale="true"\n                           (select)="onPieGridSelect($event)">\n      </ngx-charts-pie-grid>\n\n      <hr>\n\n      \x3c!--\n      (legendLabelClick)="onLegendLabelClick($event)"\n      [scheme]="colorScheme"\n      [gradient]="gradient"\n      (select)="treemapSelect($event)"--\x3e\n      <h4>Risk compared with other ethnicities of same age and gender</h4>\n      <div class="row" *ngIf="show_treemap">\n        <p>Hover over each box to view the comparative risk score.</p>\n        <ngx-charts-tree-map [labelFormatting]="labelFormat"\n                             [results]="riskQuiz.relative_risks.graphed_rr">\n        </ngx-charts-tree-map>\n\n        <table class="table table-responsive table-striped">\n          <thead>\n          <tr>\n            <th>Study</th>\n            <th>Prevalence</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngFor="let leg of treemap_legend" [style.background-color]="leg.color">\n            <td>\n              {{leg.name}}\n            </td>\n            <td>\n              {{leg.value}}\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n\n      \x3c!--\n      <div class="row">\n        <pre>multiplicative_risks = {{riskQuiz.multiplicative_risks|json}}</pre>\n      </div>\n      <div class="row">\n        <pre>relative_risks = {{riskQuiz.relative_risks|json}}</pre>\n      </div>\n      --\x3e\n\n      \x3c!--\n      <h4>Other charts</h4>\n\n      <div class="container-fluid">\n        <div class="row justify-content-md-center">\n          <div class="col" *ngIf="show_pie_adv">\n            <ngx-charts-advanced-pie-chart [view]="pieAdvDim"\n                                           [scheme]="pieAdvColorScheme"\n                                           [results]="pieAdvData"\n                                           [gradient]="pieAdvGradient"\n\n                                           (select)="pieAdvOnSelect($event)">\n            </ngx-charts-advanced-pie-chart>\n            \x3c!-- [total-label]="pieAdvLabel" --\x3e\n      \x3c!--\n          </div>\n        </div>\n      </div>\n      --\x3e\n\n      <h4>Notes</h4>\n      <ul *ngFor="let note of notes">\n        <li>{{note}}</li>\n      </ul>\n      <ul>\n        <li [innerHTML]="html_of_last_note">hello</li>\n      </ul>\n\n      <h4>References</h4>\n      <div [innerHTML]="html_of_all_refs">hello</div>\n    </div>\n  </div>\n</div>\n'}},[0]);